(function(t){function n(n){for(var a,i,c=n[0],o=n[1],u=n[2],d=0,h=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&h.push(r[i][0]),r[i]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);l&&l(n);while(h.length)h.shift()();return s.push.apply(s,u||[]),e()}function e(){for(var t,n=0;n<s.length;n++){for(var e=s[n],a=!0,c=1;c<e.length;c++){var o=e[c];0!==r[o]&&(a=!1)}a&&(s.splice(n--,1),t=i(i.s=e[0]))}return t}var a={},r={app:0},s=[];function i(n){if(a[n])return a[n].exports;var e=a[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=a,i.d=function(t,n,e){i.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,n){if(1&n&&(t=i(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)i.d(e,a,function(n){return t[n]}.bind(null,a));return e},i.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=n,c=c.slice();for(var u=0;u<c.length;u++)n(c[u]);var l=o;s.push([0,"chunk-vendors"]),e()})({0:function(t,n,e){t.exports=e("56d7")},"181e":function(t,n,e){},"1cfd":function(t,n,e){},2503:function(t,n,e){"use strict";e("9314")},"32db":function(t,n,e){},"56d7":function(t,n,e){"use strict";e.r(n);e("e260"),e("e6cf"),e("cca6"),e("a79d");var a=e("2b0e"),r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("app-header"),e("router-view")],1)},s=[],i=function(){var t=this,n=t.$createElement;t._self._c;return t._m(0)},c=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"m_header"},[e("div",{staticClass:"m_headerTitle"},[t._v(" My Bank List ")])])}],o={},u=o,l=(e("2503"),e("2877")),d=Object(l["a"])(u,i,c,!1,null,"4bd3b1d1",null),h=d.exports,f={components:{appHeader:h}},_=f,v=Object(l["a"])(_,r,s,!1,null,null,null),B=v.exports,m=e("8c4f"),p=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"m_homePage"},[e("div",{staticClass:"m_locationContainer"},[e("appGetLocationBtn")],1),e("appUserCoords")],1)},b=[],g=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"m_locationBtn",on:{click:t.getMyLocation}},[t._v(" הצג מיקומך ")])},k=[],N={methods:{getMyLocation:function(){this.$store.dispatch("setUserLocation")}}},C=N,y=(e("af22"),Object(l["a"])(C,g,k,!1,null,"d4fc9122",null)),O=y.exports,E=function(){var t=this,n=t.$createElement,e=t._self._c||n;return this.$store.getters.getCoords?e("div",{staticClass:"m_coords"},[e("div",{staticClass:"m_title"},[t._v("המיקום הנוכחי שלי")]),e("div",{staticClass:"m_coordsContainer"},[e("div",{staticClass:"m_coordsLabel"},[e("b",[t._v("קו רוחב")]),t._v(" "+t._s(t.coords.latitude))]),e("div",{staticClass:"m_coordsLabel"},[e("b",[t._v("קו אורך")]),t._v(" "+t._s(t.coords.longitude))])]),e("div",{staticClass:"m_nearBranches",on:{click:t.findNearBranches}},[t._v(" הצג סניפי בנק באזור ")])]):t._e()},F=[],S={data:function(){return{coords:"Wating for user coords"}},methods:{findNearBranches:function(){this.$router.push("/BranchesNearby/"+this.coords.latitude+"/"+this.coords.longitude)}},watch:{"$store.state.coords":function(t){this.coords=t}}},A=S,w=(e("b186"),Object(l["a"])(A,E,F,!1,null,"aba1deb0",null)),L=w.exports,$={components:{appGetLocationBtn:O,appUserCoords:L}},T=$,x=(e("8cba"),Object(l["a"])(T,p,b,!1,null,"5802c81c",null)),M=x.exports,R=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("appBankWithMaxBranches"),e("appListOfBranches",{attrs:{listOfBranches:t.branches}}),e("router-view")],1)},j=[],I=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"m_listOfBranches"},t._l(t.listOfBranches,(function(t){return e("div",{key:t._id},[e("appBranch",{attrs:{singleBranch:t}})],1)})),0)},P=[],W=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{staticClass:"m_brachContainer"},[e("div",{staticClass:"m_branchName"},[t._v(t._s(t.singleBranch.Bank_Name))]),e("div",{staticClass:"m_bankCode"},[t._v(t._s("("+t.singleBranch.Bank_Code+") "))]),e("div",{staticClass:"m_branchBodyData"},[e("div",[t._v(t._s(t.singleBranch.Branch_Name+" ("+t.singleBranch.Branch_Code+")"))]),e("div",[t._v(t._s(t.singleBranch.Branch_Address))]),e("div",[t._v(t._s(t.singleBranch.distance)+" ק״מ")]),t.singleBranch.is_closed?t._e():e("div",{staticClass:"m_isOpen"},[t._v("פתוח")]),t.singleBranch.is_closed?e("div",{staticClass:"m_isClosed"},[t._v("סגור")]):t._e(),e("div",{staticClass:"m_favorites",class:{isInFav:t.inFavList},on:{click:t.addToFav}},[t._v("+")])])])])},H=[],K=(e("caad"),e("2532"),{props:["singleBranch"],data:function(){return{inFavList:!1}},methods:{addToFav:function(){var t=this.singleBranch._id;this.$store.dispatch("addBankToFav",t)},checkIfBankInFavList:function(t){t&&t.includes(this.singleBranch._id)?this.inFavList=!0:this.inFavList=!1}},watch:{"$store.state.myFavBank":function(t){this.checkIfBankInFavList(t)}},mounted:function(){var t=this.$store.getters.getFavBankList;this.checkIfBankInFavList(t)}}),U=K,V=(e("5c33"),Object(l["a"])(U,W,H,!1,null,"b4381a4e",null)),J=V.exports,D={props:["listOfBranches"],components:{appBranch:J}},G=D,X=(e("95f5"),Object(l["a"])(G,I,P,!1,null,"11b3f7ca",null)),Y=X.exports,q=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[t.bankName?e("div",{staticClass:"m_bankWithMaxBranches",on:{click:t.getNearBranches}},[t._v(" "+t._s(t.bankName)+" ")]):t._e()])},z=[],Q=(e("99af"),{data:function(){return{bankName:null}},methods:{getNearBranches:function(){this.$router.push("/BranchesNearby/".concat(this.$route.params.latitude,"/").concat(this.$route.params.longitude,"/").concat(this.bankName,"/NearBranches"))}},watch:{"$store.state.bankWithMaxBranchesNearBy":function(t){this.bankName=t}}}),Z=Q,tt=(e("def8"),Object(l["a"])(Z,q,z,!1,null,"5aa1fa86",null)),nt=tt.exports,et={components:{appListOfBranches:Y,appBankWithMaxBranches:nt},data:function(){return{branches:null}},methods:{getNearBranches:function(){this.$store.dispatch("getNearBranches",this.$route.params)}},beforeMount:function(){this.getNearBranches()},watch:{"$store.state.nearBranches":function(t){this.branches=t.branches}}},at=et,rt=Object(l["a"])(at,R,j,!1,null,"b9a21c68",null),st=rt.exports,it=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"m_nearBranchesContainer"},[e("div",{staticClass:"m_containerWraper"},[e("div",{staticClass:"m_backBtn",on:{click:t.returnToPrevPage}},[t._v(" חזור ")]),e("div",{staticClass:"m_listContainer"},t._l(t.branchesList,(function(t){return e("div",{key:t._id},[e("appBranch",{attrs:{singleBranch:t}})],1)})),0)])])},ct=[],ot={components:{appBranch:J},data:function(){return{branchesList:null}},beforeMount:function(){this.getBankNearBranches()},methods:{getBankNearBranches:function(){this.$store.dispatch("getBankNearBranches")},returnToPrevPage:function(){this.$router.go(-1)}},watch:{"$store.state.listOfNearBranches":function(t){this.branchesList=t}}},ut=ot,lt=(e("936a"),Object(l["a"])(ut,it,ct,!1,null,"386f05bc",null)),dt=lt.exports;a["a"].use(m["a"]);var ht=[{path:"/",name:"HomePage",component:M},{path:"/BranchesNearby/:latitude/:longitude",name:"BranchesNearbyPage",component:st,children:[{path:"/BranchesNearby/:latitude/:longitude/:bank/NearBranches",name:"NearBranches",component:dt}]}],ft=new m["a"]({mode:"history",base:"/",routes:ht}),_t=ft,vt=(e("e9c4"),e("a434"),e("cb29"),e("d3b7"),e("159b"),e("4de4"),e("2f62")),Bt=e("bc3a"),mt=e.n(Bt);a["a"].use(vt["a"]);var pt=new vt["a"].Store({state:{coords:void 0,nearBranches:void 0,bankWithMaxBranchesNearBy:void 0,listOfNearBranches:void 0,max_bank_id:void 0,myFavBank:[]},mutations:{SET_USER_LOCATION:function(t,n){t.coords=n.coords},SET_NEAR_BRANCHES:function(t,n){t.nearBranches=n,t.myFavBank=JSON.parse(window.localStorage.getItem("fav_list"))},SET_BANK_WITH_MAX_BRANCHES_NEAR:function(t,n){t.bankWithMaxBranchesNearBy=n.bank_name,t.max_bank_id=n.bank_id},SET_LIST_OF_NEAR_NBRANCHES_FOR_BANK:function(t,n){t.listOfNearBranches=n},SET_MY_FAV_BANK:function(t,n){t.myFavBank||(t.myFavBank=[]),t.myFavBank.push(n),window.localStorage.setItem("fav_list",JSON.stringify(t.myFavBank))},REMOVE_BANK_FROM_FAV_LIST:function(t,n){var e=t.myFavBank.indexOf(n);e>-1&&(t.myFavBank.splice(e,1),window.localStorage.setItem("fav_list",JSON.stringify(t.myFavBank)))}},actions:{setUserLocation:function(t){var n=t.commit;window.navigator.geolocation.getCurrentPosition((function(t){n("SET_USER_LOCATION",t)}),(function(t){alert("Wasnt able to set the user location"),console.log(t)}),{maximumAge:6e4,timeout:5e3,enableHighAccuracy:!0})},getNearBranches:function(t,n){var e=t.commit;mt.a.get("/bank/calcDist/"+n.latitude+"/"+n.longitude).then((function(t){var n=t.data.branches,a=new Array(100).fill(0),r=0,s=0,i=null;n.filter((function(t){return t.distance<7})).forEach((function(t){a[t.Bank_Code]++,a[t.Bank_Code]>s&&(s=a[t.Bank_Code],r=t.Bank_Code,i=t.Bank_Name)})),e("SET_NEAR_BRANCHES",t.data),e("SET_BANK_WITH_MAX_BRANCHES_NEAR",{bank_name:i,bank_id:r})})).catch((function(t){console.log(t),alert("Wasnt able to load a list of banks")}))},getBankNearBranches:function(t){var n=t.commit,e=t.state,a=e.nearBranches.branches,r=new Array;a.filter((function(t){return t.distance<7&&t.Bank_Code==e.max_bank_id})).forEach((function(t){r.push(t)})),n("SET_LIST_OF_NEAR_NBRANCHES_FOR_BANK",r)},addBankToFav:function(t,n){var e=t.commit,a=t.state;a.myFavBank&&a.myFavBank.includes(n)?e("REMOVE_BANK_FROM_FAV_LIST",n):e("SET_MY_FAV_BANK",n)}},getters:{getCoords:function(t){return t.coords},getFavBankList:function(t){return t.myFavBank}}});a["a"].config.productionTip=!1,new a["a"]({router:_t,store:pt,render:function(t){return t(B)}}).$mount("#app")},"577d":function(t,n,e){},"5c33":function(t,n,e){"use strict";e("181e")},"5d0b":function(t,n,e){},6172:function(t,n,e){},"8cba":function(t,n,e){"use strict";e("1cfd")},9314:function(t,n,e){},"936a":function(t,n,e){"use strict";e("577d")},"95f5":function(t,n,e){"use strict";e("5d0b")},af22:function(t,n,e){"use strict";e("fbdd")},b186:function(t,n,e){"use strict";e("32db")},def8:function(t,n,e){"use strict";e("6172")},fbdd:function(t,n,e){}});
//# sourceMappingURL=app.0f4068e0.js.map